# ðŸ’“ 15. AWS - add HealthCheck to backend service

We can now start backend service in ECS without seeing any error message. But it is better to do further health check to make sure the backend application is working as expected.

Remember we have initialized a user table with two records. And we also have an API endpoint "/randomUser" to retrieve a user's information. By executing this API request we can confirm that our backend application can interact with database server correctly in AWS.

ECS task provids HealthCheck for this purpose. Navigate to **ECS --> Task definitions --> my-backend-task**. Click **Create new revision** and select **Create new revision**. Scroll to **HealthCheck** section, fill in the following:

>Command: CMD-SHELL,curl -f http://localhost:8000/randomUser || exit 1
>
>Interval: 30
>
>Timeout: 5
>
>Start period: 60
>
>Retries: 3

This health check would be run periodically and report error if curl command fails.

To run this new version of task, go to **ECS --> Clusters --> my-learning-app-cluster --> Services --> my-backend-task-service**. Click **Update service**, select the latest revision of the task for **Task definition revision**. Change **Desired tasks** to 1 and click **Update**.

Wait some time for the service to enter Running state. Switch to tab **Tasks** and wait some time. The Tasks list and Containers list should have one running instance. Their **Health status** should all be "Healthy".

To make sure this health check works as we expect we can temporarily block the access to the database and see if healtch check would fail. Open a new browser window, navigate to **EC2 --> Security Groups --> BACKEND_SG --> Outbound rules**. Remove the outbound rule for PostgreSQL. Back to the ECS running service page, wait some minutes. Task Healthy Status would become "Unhealthy".

This proves HealthCheck works and it can help to detect issue related to database access.

Add PostgreSQL port access rule back to BACKEND_SG outbound rules. Back to the ECS service task page, we can see that ECS would terminate a task with unhealthy state and launch a new one. This would lead to a list of terminated tasks displayed. Wait for some minutes, make sure there will be a new task starts and enters Healthy status.