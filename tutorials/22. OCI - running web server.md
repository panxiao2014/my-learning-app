# 🌐 22. OCI - running web server

This tutorial will setup and run a web server in the instance.

To run a web server we can use the web application in our previous tutorials. Below are the commands to download the code, build docker images and run docker containers:

>git clone git@github.com:panxiao2014/my-learning-app.git
>
>cd my-learning-app/
>
>docker build -f Dockerfile-frontend -t my-frontend:latest .
>
>docker build -f Dockerfile-backend -t my-backend:latest .
>
>export POSTGRES_PASSWORD=\<database password\>
>
>docker-compose up

We would find that we can't access the web server through inttance's public IP address after docker is running. This is because we haven't added access permission to the instance. There are two places which needs to be updated: the security rule for the instance and iptable rule for the instance.

On Oracle cloud console page, navigate to **Networking --> Virtual Cloud Networks**, click on the VCN which has the instance running. Switch to tab **Security**, there should be a security list for this VCN. Click on it, switch to **Security rules --> Ingress Rules**. We need to add an ingress rule for HTTP port 80, fill in the following:

>Source type: CIDR
>
>Source CIDR: 0.0.0.0/0
>
>IP Protocol: TCP
>
>Destination Port Range: 80

We also need to add iptable rule for the intance. Go to the instance shell, check its iptable rules by:

>iptables -vL INPUT --line-numbers -n

We could see output like this:

```
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
num   pkts bytes target     prot opt in     out     source               destination
1     1197  611K ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED
2        0     0 ACCEPT     icmp --  *      *       0.0.0.0/0            0.0.0.0/0
3       35  3030 ACCEPT     all  --  lo     *       0.0.0.0/0            0.0.0.0/0
4       16   720 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            state NEW tcp dpt:22
5        2   696 REJECT     all  --  *      *       0.0.0.0/0            0.0.0.0/0            reject-with icmp-host-prohibited
```

This shows it only allow SSH connection from port 22. So we add a rule before the fourth rule:

>iptables -I INPUT 4 -p tcp --dport 80 -m conntrack --ctstate NEW -j ACCEPT

Now we should be able to access the web server from a browser by the instance's public IP address.